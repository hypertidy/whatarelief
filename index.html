<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get topography elevation data ‚Ä¢ whatarelief</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Get topography elevation data">
<meta property="og:description" content="Obtain elevation data, topography relief for any region on the Earth. 
 Topography and bathymetry data is supported by default. Sensible defaults exist 
 for usage, with a matrix of entire planet topography(and bathymetry) returned. 
 The geographic extent can be modified (from whole-planet) to a simple region in 
 longitude/latitude by xmin,xmax,ymin,ymax range, or by specifying a grid 
 exactly with extent, dimension, projection in generic or spatial formats 
 (terra or raster). Online sources for data are used, GEBCO_2021 General 
 Bathymetric Chart of the Oceans (GEBCO) as a background (to ~500m resolution), 
 and Copernicus GLO-30 Digital Elevation Model for higher resolution 
 (to ~30m resolution). Custom source/s of topography may be input to override defaults, 
 links to file/s or URLs as required. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">whatarelief</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1.9009</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/elevation-sources.html">elevation-sources</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hypertidy/whatarelief/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level1">
<div class="page-header"><h1 id="whatarelief">whatarelief<a class="anchor" aria-label="anchor" href="#whatarelief"></a>
</h1></div>
<p>The goal of whatarelief is to obtain <em>raster</em> data, for exactly the map that you want. No need to open, crop, resize, aggregate, call out to command line or faff around with files or format.</p>
<p>There are raster sources, and whatarelief knows about online elevation and imagery so you don‚Äôt have to, just specify what what you want. Any extent, any projection.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/whatarelief" class="external-link">whatarelief</a></span><span class="op">)</span></span>
<span><span class="co">## in global Mercator projection Australia's box extent is 7100km  wide and 4500km high and its southwest </span></span>
<span><span class="co">## point is 11700km east and 5500km south of the prime meridian and equator</span></span>
<span><span class="va">p0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11700000</span>, <span class="op">-</span><span class="fl">5500000</span><span class="op">)</span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">p0</span>, each <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7100000</span>, <span class="fl">0</span>, <span class="fl">4500000</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 1024 is a enough to make a picture</span></span>
<span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1024</span>, <span class="fl">1024</span> <span class="op">*</span> <span class="fl">4.5</span><span class="op">/</span><span class="fl">7.1</span><span class="op">)</span>  <span class="co">## set the aspect ratio so our dimensions match our extent proportions</span></span>
<span></span>
<span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imagery.html">imagery</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, dimension <span class="op">=</span> <span class="va">dm</span>, projection <span class="op">=</span> <span class="st">"EPSG:3857"</span><span class="op">)</span></span>
<span><span class="va">cst</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/coastline.html">coastline</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, dimension <span class="op">=</span> <span class="va">dm</span>, projection <span class="op">=</span> <span class="st">"EPSG:3857"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="fu">ximage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">img</span>, extent <span class="op">=</span> <span class="va">ex</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">cst</span>, col <span class="op">=</span> <span class="st">"saddlebrown"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-want-1.png" width="100%"></p>
<p>Please note that the hard part up there is get <em>six numbers</em>, these are <em>extent: xmin,xmax,ymin,ymax</em> and <em>dimension: ncol,nrow</em>. Normally we have these at hand, for example the state.center data set in R, and our device size:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu">datasets</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/datasets/state.html" class="external-link">state.center</a></span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">sc</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">sc</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/dev.size.html" class="external-link">dev.size</a></span><span class="op">(</span><span class="st">"px"</span><span class="op">)</span></span>
<span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imagery.html">imagery</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, dimension <span class="op">=</span> <span class="va">dm</span>, projection <span class="op">=</span> <span class="st">"OGC:CRS84"</span>, resample <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu">ximage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">img</span>, extent <span class="op">=</span> <span class="va">ex</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ex</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span> <span class="op">*</span> <span class="va">pi</span><span class="op">/</span><span class="fl">180</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">sc</span><span class="op">$</span><span class="va">x</span>, <span class="va">sc</span><span class="op">$</span><span class="va">y</span>, col <span class="op">=</span> <span class="st">"firebrick"</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-quakes-1.png" width="100%"></p>
<p>We have this example upfront because it‚Äôs the most important part, and we don‚Äôt have helpers yet for choosing the right dimension. You are free to do what you want.</p>
<p>There is a world full of online data sources for bio/physical variables, elevation, and imagery, and we of course use the GDAL warper app lib as the most general and convenient engine for working with raster sources. There is no grand catalogue of these sources or how to use them, so we left that for later, grabbed some sources and made some helpers.</p>
<p>Here you‚Äôll find functions with clear names about what they provide.</p>
<ul>
<li>
<a href="https://hypertidy.github.io/whatarelief/reference/elevation.html" class="external-link">elevation()</a> obtain GEBCO+-SRTM</li>
<li>
<a href="https://hypertidy.github.io/whatarelief/reference/imagery.html" class="external-link">imagery()</a> obtain Virtual Earth imagery</li>
<li>
<a href="https://hypertidy.github.io/whatarelief/reference/imagery.html" class="external-link">streetmap()</a> obtain OpenStreetmap imagery</li>
<li>
<a href="https://hypertidy.github.io/whatarelief/reference/imagery.html" class="external-link">satbox()</a> obtain Mapbox Satellite/Aerial imagery</li>
<li>
<a href="https://hypertidy.github.io/whatarelief/reference/coastline.html" class="external-link">coastline()</a> obtain coastline from GEBCO+-SRTM</li>
</ul>
<p>They aren‚Äôt really specific to their name, <code><a href="reference/elevation.html">elevation()</a></code> for example can look up any raster data source (file, url, anything GDAL understands), just use the ‚Äòsource‚Äô argument. This also means we don‚Äôt have to use the online sources, just provide whatever you want. Generally, <code><a href="reference/elevation.html">elevation()</a></code> will get a matrix (a single band) of numeric raster data, and <code><a href="reference/imagery.html">imagery()</a></code> and <code><a href="reference/imagery.html">streetmap()</a></code> will get a matrix of colour data (usually from 3 or 4 bands).</p>
<p><code><a href="reference/elevation.html">elevation()</a></code> defaults to global elevation data from GEBCO, and will include higher resolution SRTM for small regions. <code><a href="reference/imagery.html">imagery()</a></code> and <code><a href="reference/imagery.html">streetmap()</a></code> default to satellite+aerial imagery, and drawings of street layers respectively.</p>
<p><code><a href="reference/coastline.html">coastline()</a></code> generates coordinates from a elevation source at level = 0, to give a ‚Äúcoast line‚Äù of sorts.</p>
<p>All of these functions have arguments <em>extent</em>, <em>dimension</em>, <em>projection</em> - the three key components that make up a raster. Specify these three components to get what you want. Every single spatial object you use has an extent (xmin,xmax,ymin,ymax) and a projection (crs), you can pick anything for dimension (but 1024x1024 is enough to make a picture, for example).</p>
<p>We have been careful to align to the <em>raster orientation</em>, which in R is the <code><a href="https://rdrr.io/r/graphics/rasterImage.html" class="external-link">rasterImage()</a></code> convention, this matches the order in which the data are returned but still requires care because it‚Äôs confusing.</p>
<p>We don‚Äôt like that <code><a href="https://rdrr.io/r/graphics/rasterImage.html" class="external-link">rasterImage()</a></code> and its second cousin <code><a href="https://rdrr.io/pkg/terra/man/image.html" class="external-link">image()</a></code> have a different set of incomplete features with these different orientations, so we use the helper <a href="httsp://github.com/hypertidy/whatarelief.git">ximage()</a> so we can work easily at a high level for visualization.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of whatarelief from <a href="https://github.com/hypertidy/whatarelief" class="external-link">Github</a> with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"hypertidy/whatarelief"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-elevation-data">Get elevation data<a class="anchor" aria-label="anchor" href="#get-elevation-data"></a>
</h2>
<p>Whole planet by default, specify an extent to hone this, use ‚Äòdimension‚Äô and ‚Äòprojection‚Äô for more custom options.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/whatarelief" class="external-link">whatarelief</a></span><span class="op">)</span></span>
<span><span class="va">im</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span><span class="op">)</span>  <span class="co">## orientation is wrong for image() but correct for rasterImage()</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/image.html" class="external-link">image</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">im</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span><span class="op">:</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-elevation-1.png" width="100%"></p>
<p>We don‚Äôt want this special handling, so use the <a href="https://github.com/hypertidy/ximage" class="external-link">ximage</a> package functions <code><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage()</a></code> and <code><a href="https://rdrr.io/pkg/ximage/man/xcontour.html" class="external-link">xcontour()</a></code> üöÄ.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ximage</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">im</span>, extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-ximage-1.png" width="100%"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">160</span>, <span class="fl">30</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">x0</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">x0</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">24</span><span class="op">)</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/xcontour.html" class="external-link">xcontour</a></span><span class="op">(</span><span class="va">x0</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, levels <span class="op">=</span> <span class="fl">10</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-ximage-2.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">160</span>, <span class="fl">30</span>, <span class="fl">50</span><span class="op">)</span>, dimension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/dev.size.html" class="external-link">dev.size</a></span><span class="op">(</span><span class="st">"px"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span></code></pre></div>
<p><img src="reference/figures/README-ximage-3.png" width="100%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">160</span>, <span class="op">-</span><span class="fl">50</span>, <span class="op">-</span><span class="fl">20</span><span class="op">)</span>, dimension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">85</span><span class="op">)</span>, resample <span class="op">=</span> <span class="st">"near"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span></code></pre></div>
<p><img src="reference/figures/README-ximage-4.png" width="100%"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">5e6</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, projection <span class="op">=</span> <span class="st">"+proj=lcc +lon_0=-85 +lat_0=-42 +lat_1=0 +lat_2=-30"</span><span class="op">)</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span></code></pre></div>
<p><img src="reference/figures/README-ximage-5.png" width="100%"></p>
<p>Can use a raster object.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 180, 360, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : lon/lat WGS 84 </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   : -7189 </span></span>
<span><span class="co">#&gt; max value   :  5332</span></span>
<span></span>
<span><span class="va">template</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">5e6</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"+proj=lcc +lon_0=-85 +lat_0=-42 +lat_1=0 +lat_2=-30"</span>, ncols <span class="op">=</span> <span class="fl">1024</span>, nrows <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span><span class="va">template</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="va">r</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 1024, 1024, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 9765.625, 9765.625  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -5e+06, 5e+06, -5e+06, 5e+06  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : +proj=lcc +lat_0=-42 +lon_0=-85 +lat_1=0 +lat_2=-30 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   : -7937 </span></span>
<span><span class="co">#&gt; max value   :  5579</span></span>
<span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-rast-1.png" width="100%"></p>
<p>Works down to quite high resolution.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">151.2093</span>, <span class="op">-</span><span class="fl">33.8688</span><span class="op">)</span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.01</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">pt</span>, each <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span>
<span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "SRTM in use, in addition to GEBCO"</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="co">#&gt; [2] "/vsicurl/https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh.vrt"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">elev</span>, zlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">elev</span><span class="op">)</span><span class="op">)</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-resolution-1.png" width="100%"></p>
<p>Similar example, but a bit more context so we can easily see that it‚Äôs ‚Äúcorrect‚Äù, by respatializing!</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">pt</span>, each <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span>
<span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "SRTM in use, in addition to GEBCO"</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="co">#&gt; [2] "/vsicurl/https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh.vrt"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">elev</span>, zlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">elev</span><span class="op">)</span><span class="op">)</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/xcontour.html" class="external-link">xcontour</a></span><span class="op">(</span><span class="va">elev</span>,  extent <span class="op">=</span> <span class="va">ex</span>, levels <span class="op">=</span> <span class="fl">5</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-correct-1.png" width="100%"></p>
<p>We can ‚Äúre-spatialize‚Äù, but no special functionality is added we just use the available tools.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.6.33</span></span>
<span><span class="co">## note the data come out in rasterImage order, so the columns/rows are switched here</span></span>
<span><span class="va">template</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="va">ex</span><span class="op">)</span>, ncols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">elev</span><span class="op">)</span><span class="op">[</span><span class="fl">2L</span><span class="op">]</span>, nrows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">elev</span><span class="op">)</span><span class="op">[</span><span class="fl">1L</span><span class="op">]</span>, crs <span class="op">=</span> <span class="st">"OGC:CRS84"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/setValues.html" class="external-link">setValues</a></span><span class="op">(</span><span class="va">template</span>, <span class="va">elev</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu">st_cast</span><span class="op">(</span><span class="fu">ozmaps</span><span class="fu">::</span><span class="va">abs_ced</span>, <span class="st">"MULTILINESTRING"</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-spatial-1.png" width="100%"></p>
<p>Note that all the information we need is present, we provide the extent, and the result has a dimension. (Longitude/latitude is assumed if sensible, else there‚Äôs a warning - but the code will run what you ask of it). Provide all the information extent, dimension, projection to get a controlled result, or use a raster or terra object to store these.</p>
<p>With a Mapbox API key set in ‚ÄòMAPBOX_API_KEY‚Äô you have access to <code><a href="reference/imagery.html">satbox()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">pt</span>, each <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span>
<span><span class="va">sat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imagery.html">satbox</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, dimension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/dev.size.html" class="external-link">dev.size</a></span><span class="op">(</span><span class="st">"px"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">sat</span>,  extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-satbox-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="custom-sources">Custom sources<a class="anchor" aria-label="anchor" href="#custom-sources"></a>
</h2>
<p>We can provide our own sources of elevation.</p>
<p>Use the ‚Äòsource‚Äô argument to <code><a href="reference/elevation.html">elevation()</a></code>, you can input multiple sources so that a higher resolution one has a fallback to a lower resolution one, note that by default we have ‚ÄúGEBCO 2021‚Äù, then ‚ÄúCopernicus GLO-30‚Äù in the sources. It doesn‚Äôt matter what projection or extent these have, but usually a higher resolution one should be listed after lower.</p>
<p>For example, this string provides the Amazon compute S3 elevation tiles, an ‚ÄòXYZ‚Äô image server that has geotiff elements but is not a georeferenced online service (hence this small bit of XML to wrap it up).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aws</span> <span class="op">&lt;-</span> <span class="st">"&lt;GDAL_WMS&gt;&lt;Service name=\"TMS\"&gt;&lt;ServerUrl&gt;https://s3.amazonaws.com/elevation-tiles-prod/geotiff/${z}/${x}/${y}.tif&lt;/ServerUrl&gt;&lt;/Service&gt;&lt;DataWindow&gt;&lt;UpperLeftX&gt;-20037508.34&lt;/UpperLeftX&gt;&lt;UpperLeftY&gt;20037508.34&lt;/UpperLeftY&gt;&lt;LowerRightX&gt;20037508.34&lt;/LowerRightX&gt;&lt;LowerRightY&gt;-20037508.34&lt;/LowerRightY&gt;&lt;TileLevel&gt;14&lt;/TileLevel&gt;&lt;TileCountX&gt;1&lt;/TileCountX&gt;&lt;TileCountY&gt;1&lt;/TileCountY&gt;&lt;YOrigin&gt;top&lt;/YOrigin&gt;&lt;/DataWindow&gt;&lt;Projection&gt;EPSG:3857&lt;/Projection&gt;&lt;BlockSizeX&gt;512&lt;/BlockSizeX&gt;&lt;BlockSizeY&gt;512&lt;/BlockSizeY&gt;&lt;BandsCount&gt;1&lt;/BandsCount&gt;&lt;DataType&gt;Int16&lt;/DataType&gt;&lt;ZeroBlockHttpCodes&gt;403,404&lt;/ZeroBlockHttpCodes&gt;&lt;DataValues&gt;&lt;NoData&gt;-32768&lt;/NoData&gt;&lt;/DataValues&gt;&lt;Cache/&gt;&lt;/GDAL_WMS&gt;"</span></span></code></pre></div>
<p>Using this, we can obtain a global summary of the available data. Sadly, these data are not quite global.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>source <span class="op">=</span> <span class="va">aws</span><span class="op">)</span></span>
<span><span class="co">## we can use the old ways, just get the orientation right :)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/image.html" class="external-link">image</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, length.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span>, length.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/transpose.html" class="external-link">t</a></span><span class="op">(</span><span class="va">m</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">:</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu">maps</span><span class="fu">::</span><span class="fu">map</span><span class="op">(</span>add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-aws-global-1.png" width="100%"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e7</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">ex</span>, projection <span class="op">=</span> <span class="st">"+proj=laea +lat_0=-90"</span>, source <span class="op">=</span> <span class="va">aws</span><span class="op">)</span>, asp <span class="op">=</span> <span class="fl">1</span>, extent <span class="op">=</span> <span class="va">ex</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-aws-global-2.png" width="100%"></p>
<p>But, we can fall back to our GEBCO 2021 source to fill the gap even with a custom source (note we can provide any number of sources, in any mix of extents and projections and resolutions).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gebco</span> <span class="op">&lt;-</span> <span class="st">"/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gebco</span>, <span class="va">aws</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">m</span>, extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu">maps</span><span class="fu">::</span><span class="fu">map</span><span class="op">(</span>add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-fallback-1.png" width="100%"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e7</span>, projection <span class="op">=</span> <span class="st">"+proj=laea +lat_0=-90"</span>, source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gebco</span>, <span class="va">aws</span><span class="op">)</span><span class="op">)</span>, extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e7</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-fallback-2.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="get-coastlines">Get coastlines<a class="anchor" aria-label="anchor" href="#get-coastlines"></a>
</h2>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cst</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/coastline.html">coastline</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cst</span>, type <span class="op">=</span> <span class="st">"b"</span>, pch <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-coastline-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="properties-of-the-sources-in-use">Properties of the sources in use<a class="anchor" aria-label="anchor" href="#properties-of-the-sources-in-use"></a>
</h2>
<p>See vignette <a href="https://hypertidy.github.io/whatarelief/articles/elevation-sources.html" class="external-link">elevation-sources</a>.</p>
<p>Note that, we could use any raster data of any kind here as custom ‚Äôsource‚Äôs ‚Ä¶ (we‚Äôre figuring out how to frame this package in general terms, that aren‚Äôt too ‚Äúspatial‚Äù).</p>
</div>
<div class="section level2">
<h2 id="experimental-features">Experimental features<a class="anchor" aria-label="anchor" href="#experimental-features"></a>
</h2>
<p>We are working out some ways of accessing data used by the raadtools project.</p>
<p>Please don‚Äôt rely on them, not working ATM (very WIP in our raadtools project too).</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/whatarelief" class="external-link">whatarelief</a></span><span class="op">)</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/raad_source.html">raad_source</a></span><span class="op">(</span><span class="st">"nsidc_25km_seaice"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span></span>
<span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">files</span><span class="op">$</span><span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/elevation.html">elevation</a></span><span class="op">(</span>source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">files</span><span class="op">[</span><span class="va">idx</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north_vrt_dsn"</span>, <span class="st">"south_vrt_dsn"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">brks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">mat</span><span class="op">[</span><span class="va">mat</span> <span class="op">&lt;=</span> <span class="fl">250</span> <span class="op">&amp;</span> <span class="va">mat</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">16</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ximage/man/ximage.html" class="external-link">ximage</a></span><span class="op">(</span><span class="va">mat</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.colors.html" class="external-link">grey.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">brks</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="va">brks</span>, main <span class="op">=</span> <span class="va">files</span><span class="op">$</span><span class="va">date</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the whatarelief project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hypertidy/whatarelief/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/hypertidy/whatarelief/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing whatarelief</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael D. Sumner <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hypertidy/whatarelief/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/hypertidy/whatarelief/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
